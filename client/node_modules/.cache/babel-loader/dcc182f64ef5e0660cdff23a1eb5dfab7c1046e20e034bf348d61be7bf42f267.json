{"ast":null,"code":"import React,{useState,createContext,useEffect}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export const AccountContext=/*#__PURE__*/createContext();const AccountContextProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState([]);const[allUsers,setAllUsers]=useState([]);const[userBal,setUserBal]=useState(0);const[pastBal,setPastBal]=useState([]);const[currentUser,setCurrentUser]=useState(null);const[profileData,setProfileData]=useState([]);const[balance,setBalance]=useState(0);// Initialize balance to 0\nuseEffect(()=>{if(currentUser){const fetchProfile=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(\"http://localhost:5000/api/auth/profile/\".concat(currentUser),{headers:{Authorization:\"Bearer \".concat(token)}});console.log(\"contextjs response.data: \"+response.data.user.username);setProfileData(response.data);}catch(error){console.error('Error fetching balance data (context - useEffect): ',error);}};fetchProfile();}},[currentUser,setProfileData]);///// REGISTER USER ////////// REGISTER USER ////////// REGISTER USER /////  \n// const registerUser = (userData) => {\n//   setUser(userData)\n//   setAllUsers((prevAllUsers) => {\n//     return [...prevAllUsers, user];\n//   });\n// }\n///// LOGIN ////////// LOGIN ////////// LOGIN /////\nconst login=userData=>{setUser(userData);setAllUsers(prevAllUsers=>{return[...prevAllUsers,user];});console.log(\"currentUser login func in context line 53\"+currentUser);};///// GIVETH ////////// GIVETH ////////// GIVETH /////\nconst giveth=n=>{setUserBal(userBal+n);setPastBal(prevPastBal=>{return[...prevPastBal,userBal];});};///// TAKETH ////////// TAKETH ////////// TAKETH /////\nconst taketh=n=>{setUserBal(userBal-n);setPastBal(prevPastBal=>{return[...prevPastBal,userBal];});};const contextValue={setBalance,balance,profileData,setProfileData,// registerUser,\ncurrentUser,setCurrentUser,userBal,giveth,pastBal,taketh,user,setAllUsers,allUsers,login};return/*#__PURE__*/_jsx(AccountContext.Provider,{value:contextValue,children:children});};export default AccountContextProvider;","map":{"version":3,"names":["React","useState","createContext","useEffect","axios","jsx","_jsx","AccountContext","AccountContextProvider","_ref","children","user","setUser","allUsers","setAllUsers","userBal","setUserBal","pastBal","setPastBal","currentUser","setCurrentUser","profileData","setProfileData","balance","setBalance","fetchProfile","token","localStorage","getItem","response","get","concat","headers","Authorization","console","log","data","username","error","login","userData","prevAllUsers","giveth","n","prevPastBal","taketh","contextValue","Provider","value"],"sources":["/Users/mrc/bb/client/src/visitable/context.js"],"sourcesContent":["import React, { useState, createContext, useEffect } from \"react\";\nimport axios from 'axios';\nexport const AccountContext = createContext();\n\nconst AccountContextProvider = ({ children }) => {\n  const [user, setUser] = useState([]);\n  const [allUsers, setAllUsers] = useState([]);\n  const [userBal, setUserBal] = useState(0);\n  const [pastBal, setPastBal] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [profileData, setProfileData] = useState([])\n  const [balance, setBalance] = useState(0); // Initialize balance to 0\n\n  useEffect(() => {\n    if (currentUser) {\n      const fetchProfile = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          const response = await axios.get(`http://localhost:5000/api/auth/profile/${currentUser}`, {\n            headers: { Authorization: `Bearer ${token}` }\n          });\n          console.log(\"contextjs response.data: \" + response.data.user.username);\n          setProfileData(response.data)\n\n        } catch (error) {\n          console.error('Error fetching balance data (context - useEffect): ', error);\n        }\n      };\n      fetchProfile();\n    }\n  }, [currentUser, setProfileData]);\n\n\n  ///// REGISTER USER ////////// REGISTER USER ////////// REGISTER USER /////  \n  // const registerUser = (userData) => {\n  //   setUser(userData)\n  //   setAllUsers((prevAllUsers) => {\n  //     return [...prevAllUsers, user];\n  //   });\n  // }\n  ///// LOGIN ////////// LOGIN ////////// LOGIN /////\n  const login = (userData) => {\n    setUser(userData);\n    setAllUsers((prevAllUsers) => {\n      return [...prevAllUsers, user];\n    });\n    console.log(\"currentUser login func in context line 53\" + currentUser)\n  };\n  ///// GIVETH ////////// GIVETH ////////// GIVETH /////\n  const giveth = (n) => {\n    setUserBal(userBal + n);\n    setPastBal((prevPastBal) => {\n      return [...prevPastBal, userBal];\n    });\n  };\n  ///// TAKETH ////////// TAKETH ////////// TAKETH /////\n  const taketh = (n) => {\n    setUserBal(userBal - n);\n    setPastBal((prevPastBal) => {\n      return [...prevPastBal, userBal];\n    });\n  };\n\n  const contextValue = {\n    setBalance,\n    balance,\n    profileData,\n    setProfileData,\n    // registerUser,\n    currentUser,\n    setCurrentUser,\n    userBal,\n    giveth,\n    pastBal,\n    taketh,\n    user,\n    setAllUsers,\n    allUsers,\n    login,\n  };\n\n  return (\n    <AccountContext.Provider value={contextValue}>\n      {children}\n    </AccountContext.Provider>\n  );\n};\nexport default AccountContextProvider;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,aAAa,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAC1B,MAAO,MAAM,CAAAC,cAAc,cAAGL,aAAa,CAAC,CAAC,CAE7C,KAAM,CAAAM,sBAAsB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC1C,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CACzC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACoB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAE;AAE3CE,SAAS,CAAC,IAAM,CACd,GAAIgB,WAAW,CAAE,CACf,KAAM,CAAAM,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAzB,KAAK,CAAC0B,GAAG,2CAAAC,MAAA,CAA2CZ,WAAW,EAAI,CACxFa,OAAO,CAAE,CAAEC,aAAa,WAAAF,MAAA,CAAYL,KAAK,CAAG,CAC9C,CAAC,CAAC,CACFQ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAGN,QAAQ,CAACO,IAAI,CAACzB,IAAI,CAAC0B,QAAQ,CAAC,CACtEf,cAAc,CAACO,QAAQ,CAACO,IAAI,CAAC,CAE/B,CAAE,MAAOE,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,qDAAqD,CAAEA,KAAK,CAAC,CAC7E,CACF,CAAC,CACDb,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAAE,CAACN,WAAW,CAAEG,cAAc,CAAC,CAAC,CAGjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAM,CAAAiB,KAAK,CAAIC,QAAQ,EAAK,CAC1B5B,OAAO,CAAC4B,QAAQ,CAAC,CACjB1B,WAAW,CAAE2B,YAAY,EAAK,CAC5B,MAAO,CAAC,GAAGA,YAAY,CAAE9B,IAAI,CAAC,CAChC,CAAC,CAAC,CACFuB,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAGhB,WAAW,CAAC,CACxE,CAAC,CACD;AACA,KAAM,CAAAuB,MAAM,CAAIC,CAAC,EAAK,CACpB3B,UAAU,CAACD,OAAO,CAAG4B,CAAC,CAAC,CACvBzB,UAAU,CAAE0B,WAAW,EAAK,CAC1B,MAAO,CAAC,GAAGA,WAAW,CAAE7B,OAAO,CAAC,CAClC,CAAC,CAAC,CACJ,CAAC,CACD;AACA,KAAM,CAAA8B,MAAM,CAAIF,CAAC,EAAK,CACpB3B,UAAU,CAACD,OAAO,CAAG4B,CAAC,CAAC,CACvBzB,UAAU,CAAE0B,WAAW,EAAK,CAC1B,MAAO,CAAC,GAAGA,WAAW,CAAE7B,OAAO,CAAC,CAClC,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAA+B,YAAY,CAAG,CACnBtB,UAAU,CACVD,OAAO,CACPF,WAAW,CACXC,cAAc,CACd;AACAH,WAAW,CACXC,cAAc,CACdL,OAAO,CACP2B,MAAM,CACNzB,OAAO,CACP4B,MAAM,CACNlC,IAAI,CACJG,WAAW,CACXD,QAAQ,CACR0B,KACF,CAAC,CAED,mBACEjC,IAAA,CAACC,cAAc,CAACwC,QAAQ,EAACC,KAAK,CAAEF,YAAa,CAAApC,QAAA,CAC1CA,QAAQ,CACc,CAAC,CAE9B,CAAC,CACD,cAAe,CAAAF,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}